# React Hooks 

> Hooks is a something on react that gets caught every time the render function gets called. They will always point to the same piece of state because the hooks get called  in the same order every time the component renders. So the component can be stateful.

## Notes

### Use state hooks
- `useState` is the most common hooks on React, it allows us to create stateful component.
- This hooks, return an array with 2 values (the current state value and a function to update it)
- Example : 
```jsx
const [pizzaType, setPizzaType] = useState("pepperoni");
```
- We use the `setPizzaType` function in the `onChange` attribut of the input. Everytime the input is typed into, it's going to call that function with what has been typed or selected there. And then React will re-render the component with the new value of `pizzaType`.

### Use effect hooks
- `useEffect` allows us to perform side effects or something outside the render cycle, commonly used for API calls. 
- In our case we want the app to request an initial set of `pizzaTypes` on initial load of the page.  So after creating an async function to fetch the data, instead of calling it directtly (which would cause it to kind of DDoS-ing our app), so we wrap that function call inside a `useEffect` hook.
- Example :
```jsx
  async function fetchPizzaTypes() {
    fetch("/api/pizzas")
      .then((res) => res.json())
      .then((data) => {
        setPizzaTypes(data);
        setLoading(false);
      });
  }

  useEffect(() => {
    fetchPizzaTypes();
  }, []);
```
- The second argument to `useEffect` is an array of dependencies for when we want the effect to re-run. When that array is empty, it means this effect only runs once when the component mounts.

### Key 
- Each item in a list / mapped components needs a unique `key` prop so React can keep track of which items have changed, been added, or removed. 
- React do tear down and rebuild everything again when components are rearranged without keys, which is inefficient.
- Using array index is not recommended because it's not a stable identifier
- The ID should be associated with the data / object being rendered.

### Strict Mode
- If we wrap our app with `<StrictMode></StrictMode>` it will give us additional warnings about things we shouldn't be doing.
- Be aware that StrictMode continually double-renders our components and will run effects twice. It does this to catch subtle bugs where our app will change between renders when it's not meant to. It can be helpful, but to be honest, once we learn to write React the correct way we'll nearly never hit that sort of bug.

### Custom Hooks
- Actually, we can use hooks to create another hooks, and then we can call it a custom hooks.
- If we make a custom hook for those sorts of things, they become individually reusable and testable. Either on displaying component state or encapsulating logic for fetching data.
- Example : 
```jsx
  const pizzaOfTheDay = usePizzaofTheDay();

  if (!pizzaOfTheDay) {
    return <div>Loading...</div>;
  }
```
- The `usePizzaofTheDay` is a custom hooks that we created to encapsulate the logic of fetching pizza of the day data.

### Context API
- Context API is a way to share values between components without having to explicitly pass a prop through (avoiding prop drilling).
- Context is for app-level state. This state exists for the entire lifetime of the app. 
- It can be used for theming, user authentication, shopping carts, etc.
- Example :
```jsx
import { createContext } from "react";

export const CartContext = createContext([[], () => { }]);
```
- we create a context for the cart with default value of an empty array and a no-op function.
- Then we wrap our app with the `CartContext.Provider`
```jsx
const App = () => {
  const cartHook = useState([]);
  return (
    <CartContext value={cartHook}>
      <div>
        <Header />
        <Order />
        <PizzaOfTheDay />
      </div>
    </CartContext>
  )
}
```
- Now any component inside the `CartContext.Provider` can access the cart state using the `useContext` hook. Example in Header component :
```jsx
export default function Header() {
  const [cart] = useContext(CartContext)
  return (
    <nav>
      <h1 className="logo">Padre Gino's Pizza</h1>
      <div className="nav-cart">
        ðŸ›’<span className="nav-cart-number">{cart.length}</span>
      </div>
    </nav>
  )
}
```